/*
 * Title                   : Hotspotter - Cool Hotspot Maker jQuery Plugin
 * Author                  : Basm , aka z-B
 * Version                 : 1.7.6
 * Last Modified           : 27 Mar 2013
 * CodeCanyon Profile      : http://codecanyon.net/user/z-B
 * License                 : http://codecanyon.net/licenses/regular_extended
 */
(function(f,e){function g(i,k){var h=0,j;f(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"]).each(function(){j=parseFloat(i.css(this.toString()));j=isNaN(j)?0:j;h+=j});i.width(parseFloat(k)-h)}function d(i,k){var h=0,j;f(["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"]).each(function(){j=parseFloat(i.css(this.toString()));j=isNaN(j)?0:j;h+=j});i.height(parseFloat(k)-h)}var c=function(h,j){this.b_generalData=j;this.b_$wrap=h;this.b_$spot=h.find("div[data-coord]");this.b_name=this.b_$spot.attr("data-name");this.b_coord=this.b_$spot.attr("data-coord").split(",");this.b_dim=this.b_$spot.attr("data-dim")?this.b_$spot.attr("data-dim").split(","):null;this.b_activeon=this.b_$spot.attr("data-activeon");this.b_isActive=false;var m=this.b_$spot.attr("data-handler"),l=f.fn.hotspotter.hasOwnProperty(m)?f.fn.hotspotter[m]:f.fn.hotspotter.General;this.b_hdOpts=this.b_$spot.attr("data-handleropts")?this.b_$spot.attr("data-handleropts").split(","):null;this.b_$tooltip=h.find(".tt-wrap");this.b_$inTooltip=this.b_$tooltip.find("> div");this.b_tooltipW=this.b_$inTooltip.attr("data-width");this.b_tooltipDir=this.b_$inTooltip.attr("data-dir")?this.b_$inTooltip.attr("data-dir"):"top";this.b_tooltipPos=this.b_$inTooltip.attr("data-pos");this.b_tooltipAnim=this.b_$inTooltip.attr("data-anim");this.b_coord[0]=parseFloat(this.b_coord[0]);this.b_coord[1]=parseFloat(this.b_coord[1]);var k;for(k in this.b_dim){if(this.b_dim.hasOwnProperty(k)){this.b_dim[k]=parseFloat(this.b_dim[k])}}this.b_tooltipPos=(typeof this.b_tooltipPos!=="undefined")?parseFloat(this.b_tooltipPos):24;f.extend(this,l)};c.prototype.b_clearEvents=function(){this.b_$wrap.unbind(c.opts.ns);this.b_$spot.unbind(c.opts.ns)};c.prototype.b_bindDefaults=function(){var h=this;if(h.b_activeon==="hover"&&h.enter&&h.leave){h.b_$wrap.bind("mouseenter"+c.opts.ns,function(){h.enter()});h.b_$wrap.bind("mouseleave"+c.opts.ns,function(){h.leave()})}else{if(h.b_activeon==="click"&&h.click){h.b_$spot.bind("click"+c.opts.ns,function(i){i.stopPropagation();h.click()})}}};c.prototype.b_showInContext=function(){var i=this.b_$wrap.parent().find(".hs-wrap > div[data-coord]").filter(":not(div[data-name="+this.b_name+"])");i.each(function(){var k=f(this).data("spot"+c.opts.ns);if(k.b_activeon==="hover"&&k.b_isActive){k.leave()}else{if(k.b_activeon==="click"&&k.b_isActive){k.click()}}});var h=this.b_$wrap.parent().offset().left,j=this.b_$wrap.parent().offset().top;f(e).scrollLeft(h);f(e).scrollTop(j-c.opts.imgTopMargin);if(this.b_activeon==="hover"&&!this.b_isActive){this.enter()}else{if(this.b_activeon==="click"&&!this.b_isActive){this.click()}}};c.opts={ns:".hotspotter",imgTopMargin:10};function b(h){h.find(".hs-wrap").each(function(){var i=f(this),j=i.find("div[data-coord]").data("spot"+c.opts.ns);if(j){j.scale();return}j=new c(f(this),h.data("general_data"+c.opts.ns));j.b_$spot.data("spot"+c.opts.ns,j);j.scale();j.b_$wrap.show();j.b_clearEvents();j.init&&j.init();if(!j.b_activeon){return}(j.b_activeon=="always")?j.enter():j.b_bindDefaults()})}function a(h,i,j){var k=j.attr("data-imgdim").split(",");i.dw=j.width()/k[0];i.dh=j.height()/k[1];b(h)}f.fn.hotspotter=function(h){var j=false;var i=this.data("spot"+c.opts.ns);if(h=="isActive"){return i?i.b_isActive:undefined}this.each(function(){var o=f(this);if(h=="hide"){o.find(".hs-wrap").hide();o.data("general_data"+c.opts.ns).visible=false;return}if(h=="show"){o.find(".hs-wrap").show();o.data("general_data"+c.opts.ns).visible=true;return}var n=o.data("spot"+c.opts.ns);if(h=="trigger"){if(n&&!n.b_isActive){n.enter()}return}if(h=="untrigger"){if(n&&n.b_isActive){n.leave()}return}var m=o.find("img[data-imgdim]"),k=o,l=k.data("general_data"+c.opts.ns);j=true;f.extend(c.opts,h);if(!l){k.data("general_data"+c.opts.ns,{dw:1,dh:1,visible:true});l=k.data("general_data"+c.opts.ns)}if(!m.length){b(k);return}if(m.width()&&m.height()){a(k,l,m)}else{m.bind("load"+c.opts.ns,function(){a(k,l,m)});if(m[0].complete){a(k,l,m);m.unbind("load"+c.opts.ns)}}});if(j){f(e).unbind(c.opts.ns);f(e).bind("hashchange"+c.opts.ns,function(){var l=e.location.hash.substr(1),k=f(".hs-wrap div[data-name="+f.trim(l)+"]");if(k.length){k.data("spot"+c.opts.ns).b_showInContext()}});f(e).bind("load"+c.opts.ns,function(){f(e).trigger("hashchange"+c.opts.ns)})}return this};f.fn.hotspotter.version="1.7";f.fn.hotspotter.General={init:function(){if(this.b_activeon==="click"){this.b_$spot.css("cursor","pointer")}if(this.b_tooltipW){this.b_$inTooltip.css("width",this.b_tooltipW)}if(!this.b_tooltipDir){this.b_tooltipDir="top"}this.b_$tooltip.addClass(this.b_tooltipDir);this.b_$inTooltip.addClass(this.b_tooltipDir);if(this.b_$spot.hasClass("img-spot")){this.$img1=this.b_$spot.find("img").eq(0);this.$img2=this.b_$spot.find("img").eq(1);this.$img2.hide()}else{if(this.b_$spot.hasClass("markup-spot")){this.$markup1=this.b_$spot.find("div").eq(0);this.$markup2=this.b_$spot.find("div").eq(1);this.$markup2.hide()}}},enter:function(){if(this.b_isActive||!this.b_generalData.visible){return}if(this.b_$spot.hasClass("img-spot")){this.$img1.css("display","none");this.$img2.css("display","block")}else{if(this.b_$spot.hasClass("markup-spot")){this.$markup1.hide();this.$markup2.show()}else{this.b_$spot.addClass("active")}}this.b_$tooltip.stop(true,true);if(this.b_tooltipAnim==="fade"){this.b_$tooltip.fadeIn("slow")}else{if(this.b_tooltipAnim==="goin"){this.b_$tooltip.show();switch(this.b_tooltipDir){case"top":this.b_$tooltip.css("bottom",100+parseFloat((30/this.b_$spot.height())*100)+"%");this.b_$tooltip.css("opacity","0");this.b_$tooltip.animate({bottom:"100%",opacity:"1"},300);break;case"right":this.b_$tooltip.css("left",100+parseFloat((30/this.b_$spot.width())*100)+"%");this.b_$tooltip.css("opacity","0");this.b_$tooltip.animate({left:"100%",opacity:"1"},300);break;case"bottom":this.b_$tooltip.css("top",100+parseFloat((30/this.b_$spot.height())*100)+"%");this.b_$tooltip.css("opacity","0");this.b_$tooltip.animate({top:"100%",opacity:"1"},300);break;case"left":this.b_$tooltip.css("right",100+parseFloat((30/this.b_$spot.width())*100)+"%");this.b_$tooltip.css("opacity","0");this.b_$tooltip.animate({right:"100%",opacity:"1"},300);break}}else{this.b_$tooltip.show()}}this.b_isActive=true},leave:function(){if(!this.b_generalData.visible){return}if(this.b_$spot.hasClass("img-spot")){this.$img1.css("display","block");this.$img2.css("display","none")}else{if(this.b_$spot.hasClass("markup-spot")){this.$markup1.show();this.$markup2.hide()}else{this.b_$spot.removeClass("active")}}if(this.b_tooltipAnim==="fade"){this.b_$tooltip.fadeOut("slow")}else{this.b_$tooltip.hide()}this.b_isActive=false},click:function(){!this.b_isActive?this.enter():this.leave()},scale:function(){var i=this.b_generalData.dw,l=this.b_generalData.dh;this.b_$wrap.css("left",this.b_coord[0]*i);this.b_$wrap.css("top",this.b_coord[1]*l);if(this.b_dim&&!this.b_$spot.hasClass("sniper-spot")){this.b_$spot.width(this.b_dim[0]*i+"px");this.b_$spot.height(this.b_dim[1]*l+"px");if(2 in this.b_dim){this.b_$spot.css("border-radius",this.b_dim[2]*i)}}if(this.b_$spot.hasClass("img-spot")){var m=this,k=this.b_$spot.find("> img").eq(0),j=this.b_$spot.find("> img").eq(1);if(!this.scaleEventBind){this.scaleEventBind=true;k.bind("load"+c.opts.ns,function(){var n=f(this);n.show();if(!m.img1W){m.img1W=this.width;m.img1H=this.height}n.width(m.img1W*m.b_generalData.dw);n.height(m.img1H*m.b_generalData.dh)});j.bind("load"+c.opts.ns,function(){var n=f(this);if(!m.img2W){j.show();m.img2W=this.width;m.img2H=this.height;j.hide()}n.width(m.img2W*m.b_generalData.dw);n.height(m.img2H*m.b_generalData.dh)})}if(k[0].complete){k.trigger("load"+c.opts.ns)}if(j[0].complete){j.trigger("load"+c.opts.ns)}}var h=-26;if(this.b_$spot.hasClass("sniper-spot")){i=l=1;h=0}if(this.b_tooltipDir==="top"||this.b_tooltipDir==="bottom"){this.b_$tooltip.css("left",h+this.b_tooltipPos*i)}if(this.b_tooltipDir==="left"||this.b_tooltipDir==="right"){this.b_$tooltip.css("top",h+this.b_tooltipPos*l)}}},f.fn.hotspotter.Aim={init:function(){this.$hsArea=this.b_$wrap.parent();if(!this.b_generalData.hsAim){this.b_generalData.hsAim={$img:this.$hsArea.find("> img")}}this.aimGeneralData=this.b_generalData.hsAim;if(this.b_activeon=="click"){this.b_$spot.css("cursor","pointer")}this.b_$inTooltip.appendTo(this.$hsArea);if(this.b_tooltipW&&(this.b_tooltipDir=="left"||this.b_tooltipDir=="right")){this.b_$inTooltip.width(this.b_tooltipW)}this.$ttContent=this.b_$inTooltip.find(".tt-content");this.b_generalData.hsAim.$img.bind("load"+c.opts.ns,f.proxy(this._getOriginalTooltipDim,this));this._getOriginalTooltipDim();if(this.b_tooltipDir){this.b_$inTooltip.addClass(this.b_tooltipDir)}if(this.b_$spot.hasClass("img-spot")){this.$img1=this.b_$spot.find("> img").eq(0);this.$img2=this.b_$spot.find("> img").eq(1)}if(this.b_hdOpts=="false"){return}if(!this.aimGeneralData.rect0){for(var h=4;h--;){this.aimGeneralData["rect"+h]=f("<div/>").addClass("hs-aim-rect").appendTo(this.$hsArea);var j=this.aimGeneralData;this.aimGeneralData["rect"+h].bind("mouseenter",function(){if(j.activeSpot&&j.activeSpot.b_activeon=="hover"){j.activeSpot.leave()}});this.aimGeneralData["pillar"+h]=f("<div/>").addClass("hs-aim-pillar").appendTo(this.$hsArea)}}this.spotDim={w:this.b_$spot.outerWidth(),h:this.b_$spot.outerHeight(),x:this.b_$wrap.position().left,y:this.b_$wrap.position().top}},enter:function(){if(this.b_isActive||!this.b_generalData.visible){return}if(!this.aimGeneralData.$img[0].complete){return}this.b_isActive=true;this.aimGeneralData.activeSpot&&this.aimGeneralData.activeSpot.leave();this.aimGeneralData.activeSpot=this;if(!this.aimGeneralData.imgDim){this.aimGeneralData.imgDim={w:this.aimGeneralData.$img.width(),h:this.aimGeneralData.$img.height()}}if(this.b_$spot.hasClass("img-spot")){this.$img1.hide();this.$img2.show()}if(this.b_hdOpts=="false"){this._showTooltip()}else{this.b_$spot.addClass("hs-flatten");this.aimGeneralData.rect0.width(this.aimGeneralData.imgDim.w);this.aimGeneralData.rect0.height(this.spotDim.y);this.aimGeneralData.rect0.css("left",0);this.aimGeneralData.rect0.css("top",0);this.aimGeneralData.rect1.width(this.aimGeneralData.imgDim.w-(this.spotDim.x+this.spotDim.w));this.aimGeneralData.rect1.height(this.aimGeneralData.imgDim.h-this.spotDim.y);this.aimGeneralData.rect1.css("left",this.spotDim.x+this.spotDim.w);this.aimGeneralData.rect1.css("top",this.spotDim.y);this.aimGeneralData.rect2.width((this.spotDim.x+this.spotDim.w));this.aimGeneralData.rect2.height(this.aimGeneralData.imgDim.h-(this.spotDim.y+this.spotDim.h));this.aimGeneralData.rect2.css("left",0);this.aimGeneralData.rect2.css("top",this.spotDim.y+this.spotDim.h);this.aimGeneralData.rect3.width(this.spotDim.x);this.aimGeneralData.rect3.height(this.spotDim.h);this.aimGeneralData.rect3.css("left",0);this.aimGeneralData.rect3.css("top",this.spotDim.y);this.aimGeneralData.pillar0.width(4);this.aimGeneralData.pillar0.height(0);this.aimGeneralData.pillar0.css("top",0);this.aimGeneralData.pillar0.css("left",this.spotDim.x+(this.spotDim.w/2));this.aimGeneralData.pillar1.width(0);this.aimGeneralData.pillar1.height(4);this.aimGeneralData.pillar1.css("top",this.spotDim.y+(this.spotDim.h/2));this.aimGeneralData.pillar1.css("left",this.aimGeneralData.imgDim.w);this.aimGeneralData.pillar2.width("4");this.aimGeneralData.pillar2.height(0);this.aimGeneralData.pillar2.css("bottom",this.b_$wrap.parent().height()-this.aimGeneralData.imgDim.h);this.aimGeneralData.pillar2.css("left",this.spotDim.x+(this.spotDim.w/2));this.aimGeneralData.pillar3.width(0);this.aimGeneralData.pillar3.height("4");this.aimGeneralData.pillar3.css("top",this.spotDim.y+(this.spotDim.h/2));this.aimGeneralData.pillar3.css("left",0);for(var j=4;j--;){this.aimGeneralData["rect"+j].show();this.aimGeneralData["pillar"+j].show()}var h=this.aimGeneralData.imgDim.w-(this.spotDim.x+this.spotDim.w),k=this;this.aimGeneralData.pillar0.animate({height:this.spotDim.y},300);this.aimGeneralData.pillar1.animate({width:h,left:"-="+h},300);this.aimGeneralData.pillar2.animate({height:this.aimGeneralData.imgDim.h-(this.spotDim.y+this.spotDim.h)},300);this.aimGeneralData.pillar3.animate({width:this.spotDim.x},300,function(){k._showTooltip()})}},leave:function(){if(!this.aimGeneralData.$img[0].complete||!this.b_generalData.visible){return}this.b_isActive=false;this.aimGeneralData.activeSpot=null;this.b_$spot.removeClass("hs-flatten");if(this.b_$spot.hasClass("img-spot")){this.$img1.show();this.$img2.hide()}if(this.b_hdOpts!="false"){for(var h=4;h--;){this.aimGeneralData["rect"+h].hide();this.aimGeneralData["pillar"+h].stop();this.aimGeneralData["pillar"+h].hide()}}this.$ttContent.hide();switch(this.b_tooltipDir){case"top":this.b_$inTooltip.animate({height:0},400,function(){f(this).hide()});break;case"right":this.b_$inTooltip.animate({width:0},400,function(){f(this).hide()});break;case"bottom":this.b_$inTooltip.animate({height:0},400,function(){f(this).hide()});break;case"left":this.b_$inTooltip.animate({width:0,right:"100%"},400,function(){f(this).hide()});break}},click:function(){!this.b_isActive?this.enter():this.leave()},scale:function(){this.b_$wrap.css("left",this.b_coord[0]*this.b_generalData.dw);this.b_$wrap.css("top",this.b_coord[1]*this.b_generalData.dh);if(this.b_dim&&!this.b_$spot.hasClass("sniper-spot")){this.b_$spot.width(this.b_dim[0]*this.b_generalData.dw);this.b_$spot.height(this.b_dim[1]*this.b_generalData.dw);if(2 in this.b_dim){this.b_$spot.css("border-radius",this.b_dim[2]*this.b_generalData.dw)}}if(this.b_$spot.hasClass("img-spot")){var j=this,i=this.b_$spot.find("> img").eq(0),h=this.b_$spot.find("> img").eq(1);if(!this.scaleEventBind){this.scaleEventBind=true;i.bind("load"+c.opts.ns,function(){var k=f(this);if(!j.img1W){j.img1W=this.width;j.img1H=this.height}k.width(j.img1W*j.b_generalData.dw);k.height(j.img1H*j.b_generalData.dh)});h.bind("load"+c.opts.ns,function(){var k=f(this);if(!j.img2W){h.show();j.img2W=this.width;j.img2H=this.height;h.hide()}k.width(j.img2W*j.b_generalData.dw);k.height(j.img2H*j.b_generalData.dh)})}if(i[0].complete){i.trigger("load"+c.opts.ns)}if(h[0].complete){h.trigger("load"+c.opts.ns)}}if(this.spotDim){this.spotDim={w:this.b_$spot.outerWidth(),h:this.b_$spot.outerHeight(),x:this.b_$wrap.position().left,y:this.b_$wrap.position().top};this.aimGeneralData.imgDim={w:this.aimGeneralData.$img.width(),h:this.aimGeneralData.$img.height()}}},_getOriginalTooltipDim:function(){this.$ttContent.show();this.ttOrignW=this.b_$inTooltip.width();this.ttOrignH=this.b_$inTooltip.height();this.$ttContent.hide()},_showTooltip:function(){this.b_$inTooltip.show();var i=this.$ttContent;function h(){i.show()}switch(this.b_tooltipDir){case"top":g(this.b_$inTooltip,this.aimGeneralData.imgDim.w);this.b_$inTooltip.css("left",0);this.b_$inTooltip.css("bottom","100%");this.b_$inTooltip.height(0);this.b_$inTooltip.animate({height:this.ttOrignH},400,h);break;case"right":d(this.b_$inTooltip,this.aimGeneralData.imgDim.h);this.b_$inTooltip.css("left",this.aimGeneralData.imgDim.w);this.b_$inTooltip.css("top",0);this.b_$inTooltip.width(0);this.b_$inTooltip.animate({width:this.ttOrignW},400,h);break;case"bottom":g(this.b_$inTooltip,this.aimGeneralData.imgDim.w);this.b_$inTooltip.css("left",0);this.b_$inTooltip.css("top",this.aimGeneralData.imgDim.h);this.b_$inTooltip.height(0);this.b_$inTooltip.animate({height:this.ttOrignH},400,h);break;case"left":d(this.b_$inTooltip,this.aimGeneralData.imgDim.h);this.b_$inTooltip.css("top",0);this.b_$inTooltip.width(0);this.b_$inTooltip.css("right","100%");this.b_$inTooltip.animate({width:this.ttOrignW},400,h);break}}}})(jQuery,window);